-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1:3306
-- Generation Time: Aug 22, 2025 at 11:49 AM
-- Server version: 9.1.0
-- PHP Version: 8.3.14

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `rating`
--

-- --------------------------------------------------------

--
-- Table structure for table `departments`
--

DROP TABLE IF EXISTS `departments`;
CREATE TABLE IF NOT EXISTS `departments` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `faculty_id` int NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `faculty_id` (`faculty_id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `departments`
--

INSERT INTO `departments` (`id`, `name`, `faculty_id`, `created_at`) VALUES
(1, 'TJAB', 1, '2025-08-18 10:42:10'),
(2, 'TMJ', 1, '2025-08-18 10:42:23'),
(3, 'Menejment', 2, '2025-08-18 10:42:39'),
(4, 'moliya', 2, '2025-08-18 10:42:47'),
(5, 'Informatika', 1, '2025-08-18 17:30:23'),
(6, 'UTF', 1, '2025-08-18 17:30:41');

-- --------------------------------------------------------

--
-- Table structure for table `department_section_targets`
--

DROP TABLE IF EXISTS `department_section_targets`;
CREATE TABLE IF NOT EXISTS `department_section_targets` (
  `id` int NOT NULL AUTO_INCREMENT,
  `period_id` int NOT NULL,
  `department_id` int NOT NULL,
  `section_code` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `target_value` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'SuperAdmin belgilagan reja qiymati',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_target_for_dept_period_section` (`period_id`,`department_id`,`section_code`),
  KEY `fk_dept_targets_department` (`department_id`),
  KEY `idx_dept_period` (`department_id`,`period_id`)
) ENGINE=InnoDB AUTO_INCREMENT=398 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `department_section_targets`
--

INSERT INTO `department_section_targets` (`id`, `period_id`, `department_id`, `section_code`, `target_value`, `created_at`, `updated_at`) VALUES
(1, 1, 3, '1.1', 20.00, '2025-08-18 10:45:27', '2025-08-22 11:28:35'),
(2, 1, 3, '1.3', 50.00, '2025-08-18 10:45:27', '2025-08-18 12:00:18'),
(3, 1, 3, '2.1.1', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(4, 1, 3, '2.2', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(5, 1, 3, '2.3', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(6, 1, 3, '2.4', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(7, 1, 3, '2.5', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(8, 1, 4, '1.1', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(9, 1, 4, '1.3', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(10, 1, 4, '2.1.1', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(11, 1, 4, '2.2', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(12, 1, 4, '2.3', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(13, 1, 4, '2.4', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(14, 1, 4, '2.5', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(15, 1, 1, '1.1', 5.00, '2025-08-18 10:45:27', '2025-08-18 17:24:20'),
(16, 1, 1, '1.3', 50.00, '2025-08-18 10:45:27', '2025-08-18 11:45:47'),
(17, 1, 1, '2.1.1', 3.00, '2025-08-18 10:45:27', '2025-08-18 11:45:47'),
(18, 1, 1, '2.2', 3.00, '2025-08-18 10:45:27', '2025-08-18 11:45:47'),
(19, 1, 1, '2.3', 3.00, '2025-08-18 10:45:27', '2025-08-18 11:45:47'),
(20, 1, 1, '2.4', 3.00, '2025-08-18 10:45:27', '2025-08-18 11:45:47'),
(21, 1, 1, '2.5', 3.00, '2025-08-18 10:45:27', '2025-08-18 11:45:47'),
(22, 1, 2, '1.1', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(23, 1, 2, '1.3', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(24, 1, 2, '2.1.1', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(25, 1, 2, '2.2', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(26, 1, 2, '2.3', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(27, 1, 2, '2.4', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(28, 1, 2, '2.5', 0.00, '2025-08-18 10:45:27', '2025-08-18 10:45:27'),
(148, 1, 5, '1.1', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(149, 1, 5, '1.3', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(150, 1, 5, '2.1.1', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(151, 1, 5, '2.2', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(152, 1, 5, '2.3', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(153, 1, 5, '2.4', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(154, 1, 5, '2.5', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(155, 1, 6, '1.1', 5.00, '2025-08-18 17:46:35', '2025-08-18 17:46:46'),
(156, 1, 6, '1.3', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(157, 1, 6, '2.1.1', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(158, 1, 6, '2.2', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(159, 1, 6, '2.3', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(160, 1, 6, '2.4', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(161, 1, 6, '2.5', 0.00, '2025-08-18 17:46:35', '2025-08-18 17:46:35'),
(239, 1, 3, '2.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(240, 1, 3, '2.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(241, 1, 3, '2.1.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(242, 1, 3, '2.6.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(243, 1, 3, '2.6.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(244, 1, 3, '3.1.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(245, 1, 3, '3.1.2', 5.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(246, 1, 3, '3.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(247, 1, 3, '3.2.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(248, 1, 3, '3.2.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(249, 1, 3, '3.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(250, 1, 3, '3.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(251, 1, 3, '3.5', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(252, 1, 3, '4.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(253, 1, 3, '4.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(254, 1, 3, '4.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(255, 1, 3, '4.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(256, 1, 3, '5.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(257, 1, 3, '5.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(258, 1, 4, '2.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(259, 1, 4, '2.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(260, 1, 4, '2.1.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(261, 1, 4, '2.6.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(262, 1, 4, '2.6.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(263, 1, 4, '3.1.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(264, 1, 4, '3.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(265, 1, 4, '3.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(266, 1, 4, '3.2.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(267, 1, 4, '3.2.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(268, 1, 4, '3.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(269, 1, 4, '3.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(270, 1, 4, '3.5', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(271, 1, 4, '4.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(272, 1, 4, '4.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(273, 1, 4, '4.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(274, 1, 4, '4.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(275, 1, 4, '5.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(276, 1, 4, '5.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(277, 1, 5, '2.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(278, 1, 5, '2.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(279, 1, 5, '2.1.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(280, 1, 5, '2.6.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(281, 1, 5, '2.6.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(282, 1, 5, '3.1.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(283, 1, 5, '3.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(284, 1, 5, '3.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(285, 1, 5, '3.2.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(286, 1, 5, '3.2.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(287, 1, 5, '3.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(288, 1, 5, '3.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(289, 1, 5, '3.5', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(290, 1, 5, '4.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(291, 1, 5, '4.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(292, 1, 5, '4.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(293, 1, 5, '4.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(294, 1, 5, '5.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(295, 1, 5, '5.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(296, 1, 1, '2.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(297, 1, 1, '2.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(298, 1, 1, '2.1.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(299, 1, 1, '2.6.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(300, 1, 1, '2.6.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(301, 1, 1, '3.1.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(302, 1, 1, '3.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(303, 1, 1, '3.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(304, 1, 1, '3.2.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(305, 1, 1, '3.2.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(306, 1, 1, '3.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(307, 1, 1, '3.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(308, 1, 1, '3.5', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(309, 1, 1, '4.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(310, 1, 1, '4.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(311, 1, 1, '4.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(312, 1, 1, '4.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(313, 1, 1, '5.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(314, 1, 1, '5.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(315, 1, 2, '2.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(316, 1, 2, '2.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(317, 1, 2, '2.1.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(318, 1, 2, '2.6.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(319, 1, 2, '2.6.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(320, 1, 2, '3.1.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(321, 1, 2, '3.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(322, 1, 2, '3.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(323, 1, 2, '3.2.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(324, 1, 2, '3.2.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(325, 1, 2, '3.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(326, 1, 2, '3.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(327, 1, 2, '3.5', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(328, 1, 2, '4.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(329, 1, 2, '4.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(330, 1, 2, '4.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(331, 1, 2, '4.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(332, 1, 2, '5.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(333, 1, 2, '5.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(334, 1, 6, '2.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(335, 1, 6, '2.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(336, 1, 6, '2.1.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(337, 1, 6, '2.6.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(338, 1, 6, '2.6.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(339, 1, 6, '3.1.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(340, 1, 6, '3.1.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(341, 1, 6, '3.1.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(342, 1, 6, '3.2.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(343, 1, 6, '3.2.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(344, 1, 6, '3.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(345, 1, 6, '3.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(346, 1, 6, '3.5', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(347, 1, 6, '4.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(348, 1, 6, '4.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(349, 1, 6, '4.3', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(350, 1, 6, '4.4', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(351, 1, 6, '5.1', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35'),
(352, 1, 6, '5.2', 0.00, '2025-08-22 09:55:35', '2025-08-22 09:55:35');

-- --------------------------------------------------------

--
-- Table structure for table `faculties`
--

DROP TABLE IF EXISTS `faculties`;
CREATE TABLE IF NOT EXISTS `faculties` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `faculties`
--

INSERT INTO `faculties` (`id`, `name`, `created_at`) VALUES
(1, 'Mexanika', '2025-08-18 10:41:45'),
(2, 'Iqtisod', '2025-08-18 10:41:52');

-- --------------------------------------------------------

--
-- Table structure for table `periods`
--

DROP TABLE IF EXISTS `periods`;
CREATE TABLE IF NOT EXISTS `periods` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'Masalan: 2025-2026 o''quv yili',
  `start_date` date NOT NULL,
  `end_date` date NOT NULL,
  `status` enum('active','closed') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL DEFAULT 'active' COMMENT 'Davr holati',
  `created_by` int NOT NULL COMMENT 'SuperAdmin IDsi',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `fk_periods_created_by` (`created_by`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `periods`
--

INSERT INTO `periods` (`id`, `name`, `start_date`, `end_date`, `status`, `created_by`, `created_at`, `updated_at`) VALUES
(1, '2025-2026 o\'quv yili', '2025-01-01', '2025-12-31', 'active', 1, '2025-08-18 10:37:32', '2025-08-18 10:37:32'),
(3, '2024-2025', '0024-01-12', '2024-12-31', 'closed', 1, '2025-08-19 10:34:50', '2025-08-19 10:34:55');

-- --------------------------------------------------------

--
-- Table structure for table `submissions`
--

DROP TABLE IF EXISTS `submissions`;
CREATE TABLE IF NOT EXISTS `submissions` (
  `id` int NOT NULL AUTO_INCREMENT,
  `user_id` int NOT NULL,
  `section_code` varchar(10) NOT NULL,
  `period_id` int DEFAULT NULL COMMENT 'Ishlanma qaysi davrga tegishli',
  `full_name` varchar(100) NOT NULL,
  `data` json NOT NULL,
  `status` enum('pending','approved','rejected') NOT NULL DEFAULT 'pending',
  `rejection_reason` text COMMENT 'Rad etish sababi',
  `file_path` varchar(255) DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `user_id` (`user_id`),
  KEY `section_code` (`section_code`),
  KEY `period_id` (`period_id`),
  KEY `idx_progress_query` (`user_id`,`period_id`,`status`) COMMENT 'Hisobotlarni tezlashtirish uchun optimizatsiya indeksi',
  KEY `idx_status` (`status`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `submissions`
--

INSERT INTO `submissions` (`id`, `user_id`, `section_code`, `period_id`, `full_name`, `data`, `status`, `rejection_reason`, `file_path`, `created_at`) VALUES
(1, 2, '1.1', 1, 'Xushnid Madaliyev', '{\"council_code\": \"sadfasfsdaSas\", \"decision_date\": \"2025-08-11\", \"dissertation_topic\": \"fghfgh\", \"specialty_code_name\": \"3222\", \"council_decision_number\": \"sdfasdf\"}', 'approved', NULL, NULL, '2025-08-18 11:02:34'),
(3, 2, '2.1.1', NULL, 'Xushnid Madaliyev', '{\"url\": \"https://twitter.com/Enezator/status/1685575395842658304?t=BRCoz46CkK9IQg8tuhajrw&s=19\", \"share\": \"0.333\", \"article_name\": \"wdaawdawd\", \"journal_name\": \"wadawdwa\", \"publish_date\": \"2025-07-29\", \"authors_count\": \"3\", \"journal_country\": \"dasdaw\"}', 'pending', NULL, 'uploads/2.1.1/xushnid_madaliyev_1755524957.pdf', '2025-08-18 13:49:17'),
(4, 2, '2.2', 1, 'Xushnid Madaliyev', '{\"url\": \"https://next.appsgeyser.com/create-app\", \"share\": \"0.333\", \"country\": \"amerika\", \"article_name\": \"dsadasdlaJHSDKajhdkjlAHDJKLAhsdkjhasKDJAsdasd\", \"journal_name\": \"hahahah\", \"publish_date\": \"2025-08-12\", \"authors_count\": \"3\"}', 'approved', NULL, 'uploads/2.2/xushnid_madaliyev_1755592065.pdf', '2025-08-19 08:27:45'),
(5, 2, '2.3', 1, 'Madaliyev Xushnid Bahramjon o\'g\'li', '{\"url\": \"https://next.appsgeyser.com/create-app\", \"share\": \"0.333\", \"article_name\": \"dsadasdlaJHSDKajhdkjlAHDJKLAhsdkjhasKDJAsdasd\", \"journal_name\": \"hahahah\", \"publish_date\": \"2025-08-12\", \"authors_count\": \"3\"}', 'rejected', 'to\'g\'irlang', 'uploads/2.3/madaliyev_xushnid_bahramjon_ogli_1755594054.pdf', '2025-08-19 09:00:54'),
(8, 2, '1.3', 1, 'Madaliyev Xushnid Bahramjon o\'g\'li', '{\"url\": \"\", \"h_index\": \"50\", \"data_period\": \"2025\"}', 'approved', NULL, NULL, '2025-08-19 10:40:28'),
(9, 2, '1.3', 1, 'Madaliyev Xushnid Bahramjon o\'g\'li', '{\"url\": \"\", \"h_index\": \"12\", \"data_period\": \"2025\"}', 'approved', NULL, NULL, '2025-08-19 10:50:20'),
(10, 2, '3.1.1', 1, 'Madaliyev Xushnid Bahramjon o\'g\'li', '{\"share\": \"0.250\", \"cert_date\": \"2025-08-12\", \"cert_number\": \"65465456\", \"article_name\": \"dsadasdlaJHSDKajhdkjlAHDJKLAhsdkjhasKDJAsdasd\", \"authors_count\": \"4\", \"specialty_code_name\": \"dfdasfasdf\"}', 'approved', NULL, 'uploads/3.1.1/madaliyev_xushnid_bahramjon_ogli_1755856263.pdf', '2025-08-22 09:51:03'),
(11, 4, '3.4', 1, 'Toshpulatov Qobiljon', '{\"order_sum\": \"500000\", \"order_name\": \"fdgdfg\"}', 'rejected', 'sdgdsgsdgadfg', 'uploads/3.4/toshpulatov_qobiljon_1755856607.pdf', '2025-08-22 09:56:47');

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

DROP TABLE IF EXISTS `users`;
CREATE TABLE IF NOT EXISTS `users` (
  `id` int NOT NULL AUTO_INCREMENT,
  `full_name` varchar(100) NOT NULL,
  `username` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `role` enum('superadmin','facultyadmin','departmentadmin','user') NOT NULL DEFAULT 'user',
  `faculty_id` int DEFAULT NULL,
  `department_id` int DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  KEY `fk_users_faculty` (`faculty_id`),
  KEY `fk_users_department` (`department_id`),
  KEY `idx_role` (`role`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`id`, `full_name`, `username`, `password`, `role`, `faculty_id`, `department_id`, `created_at`) VALUES
(1, 'Administrator', 'admin', '$2y$10$iBKXexhY9SLOGG1dlVR1VemXCeBdKa8CBknjKF.1TJvl5N5HFbzWO', 'superadmin', NULL, NULL, '2025-07-18 01:07:10'),
(2, 'Madaliyev Xushnid Bahramjon o\'g\'li', 'xushnid', '$2y$10$yPzIDQr92t82enOJ4Xl0wuqdtUStyeNG/ViERbFjRIvCIcDFW.9rq', 'departmentadmin', 1, 1, '2025-08-18 10:44:15'),
(3, 'Asqarov Azizbek', 'azizbek', '$2y$10$lm1GRTS/AczRb4AEvp.4y.mZlA7ygRyg/7LMS06wr/ZnICxMhd/WW', 'facultyadmin', 1, NULL, '2025-08-18 10:49:40'),
(4, 'Toshpulatov Qobiljon', 'qobiljon', '$2y$10$RFzzl4sKvsusdTjpHEi7/ex0vOPrqMhuQpfO0JVq6SbYJ5Vt5J9xm', 'user', 1, 1, '2025-08-18 12:56:26'),
(5, 'Yoqubjanov Abdulaziz', 'abdulaziz', '$2y$10$eLyOwKmy0FdiWXFXazD.0OzpTrGYqOUsFlts8pPTbOXrtCvXFBzoa', 'user', 1, 1, '2025-08-18 13:26:03');

-- --------------------------------------------------------

--
-- Table structure for table `user_section_targets`
--

DROP TABLE IF EXISTS `user_section_targets`;
CREATE TABLE IF NOT EXISTS `user_section_targets` (
  `id` int NOT NULL AUTO_INCREMENT,
  `period_id` int NOT NULL,
  `user_id` int NOT NULL,
  `section_code` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,
  `target_value` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT 'Kafedra admini belgilagan reja qiymati',
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique_target_for_user_period_section` (`period_id`,`user_id`,`section_code`),
  KEY `fk_user_targets_user` (`user_id`),
  KEY `idx_user_period` (`user_id`,`period_id`)
) ENGINE=InnoDB AUTO_INCREMENT=434 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Dumping data for table `user_section_targets`
--

INSERT INTO `user_section_targets` (`id`, `period_id`, `user_id`, `section_code`, `target_value`, `created_at`, `updated_at`) VALUES
(1, 1, 3, '1.1', 1.00, '2025-08-18 10:58:04', '2025-08-18 11:46:32'),
(2, 1, 3, '1.3', 20.00, '2025-08-18 10:58:04', '2025-08-18 11:46:32'),
(3, 1, 3, '2.1.1', 1.00, '2025-08-18 10:58:04', '2025-08-18 11:42:59'),
(4, 1, 3, '2.2', 1.00, '2025-08-18 10:58:04', '2025-08-18 11:46:32'),
(5, 1, 3, '2.3', 2.00, '2025-08-18 10:58:04', '2025-08-18 11:46:51'),
(6, 1, 3, '2.4', 0.00, '2025-08-18 10:58:04', '2025-08-18 11:45:21'),
(7, 1, 3, '2.5', 0.00, '2025-08-18 10:58:04', '2025-08-18 11:45:24'),
(8, 1, 2, '1.1', 2.00, '2025-08-18 10:58:04', '2025-08-22 11:14:31'),
(9, 1, 2, '1.3', 20.00, '2025-08-18 10:58:04', '2025-08-22 10:14:10'),
(10, 1, 2, '2.1.1', 3.00, '2025-08-18 10:58:04', '2025-08-22 11:15:01'),
(11, 1, 2, '2.2', 3.00, '2025-08-18 10:58:04', '2025-08-19 08:26:43'),
(12, 1, 2, '2.3', 3.00, '2025-08-18 10:58:04', '2025-08-19 08:26:43'),
(13, 1, 2, '2.4', 3.00, '2025-08-18 10:58:04', '2025-08-19 08:26:43'),
(14, 1, 2, '2.5', 3.00, '2025-08-18 10:58:04', '2025-08-19 08:26:43'),
(236, 1, 4, '1.1', 2.00, '2025-08-18 13:04:29', '2025-08-18 13:04:29'),
(237, 1, 4, '1.3', 0.00, '2025-08-18 13:04:29', '2025-08-18 13:04:29'),
(238, 1, 4, '2.1.1', 3.00, '2025-08-18 13:04:29', '2025-08-18 13:04:29'),
(239, 1, 4, '2.2', 3.00, '2025-08-18 13:04:29', '2025-08-18 13:04:29'),
(240, 1, 4, '2.3', 0.00, '2025-08-18 13:04:29', '2025-08-18 13:04:29'),
(241, 1, 4, '2.4', 0.00, '2025-08-18 13:04:29', '2025-08-18 13:04:29'),
(242, 1, 4, '2.5', 0.00, '2025-08-18 13:04:29', '2025-08-18 13:04:29'),
(248, 1, 5, '1.1', 3.00, '2025-08-19 08:25:58', '2025-08-22 11:23:25'),
(249, 1, 5, '1.3', 0.00, '2025-08-19 08:25:58', '2025-08-19 08:25:58'),
(250, 1, 5, '2.3', 0.00, '2025-08-19 08:25:58', '2025-08-19 08:25:58'),
(251, 1, 5, '2.4', 0.00, '2025-08-19 08:25:58', '2025-08-19 08:25:58'),
(252, 1, 5, '2.5', 0.00, '2025-08-19 08:25:58', '2025-08-19 08:25:58'),
(274, 1, 2, '2.1.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(275, 1, 2, '2.1.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(276, 1, 2, '2.1.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(277, 1, 2, '2.6.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(278, 1, 2, '2.6.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(279, 1, 2, '3.1.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(280, 1, 2, '3.1.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(281, 1, 2, '3.1.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(282, 1, 2, '3.2.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(283, 1, 2, '3.2.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(284, 1, 2, '3.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(285, 1, 2, '3.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(286, 1, 2, '3.5', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(287, 1, 2, '4.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(288, 1, 2, '4.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(289, 1, 2, '4.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(290, 1, 2, '4.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(291, 1, 2, '5.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(292, 1, 2, '5.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(293, 1, 4, '2.1.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(294, 1, 4, '2.1.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(295, 1, 4, '2.1.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(296, 1, 4, '2.6.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(297, 1, 4, '2.6.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(298, 1, 4, '3.1.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(299, 1, 4, '3.1.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(300, 1, 4, '3.1.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(301, 1, 4, '3.2.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(302, 1, 4, '3.2.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(303, 1, 4, '3.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(304, 1, 4, '3.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(305, 1, 4, '3.5', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(306, 1, 4, '4.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(307, 1, 4, '4.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(308, 1, 4, '4.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(309, 1, 4, '4.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(310, 1, 4, '5.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(311, 1, 4, '5.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(312, 1, 5, '2.1.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(313, 1, 5, '2.1.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(314, 1, 5, '2.1.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(315, 1, 5, '2.1.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(316, 1, 5, '2.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(317, 1, 5, '2.6.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(318, 1, 5, '2.6.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(319, 1, 5, '3.1.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(320, 1, 5, '3.1.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(321, 1, 5, '3.1.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(322, 1, 5, '3.2.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(323, 1, 5, '3.2.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(324, 1, 5, '3.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(325, 1, 5, '3.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(326, 1, 5, '3.5', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(327, 1, 5, '4.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(328, 1, 5, '4.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(329, 1, 5, '4.3', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(330, 1, 5, '4.4', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(331, 1, 5, '5.1', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58'),
(332, 1, 5, '5.2', 0.00, '2025-08-22 10:13:58', '2025-08-22 10:13:58');

--
-- Constraints for dumped tables
--

--
-- Constraints for table `departments`
--
ALTER TABLE `departments`
  ADD CONSTRAINT `departments_ibfk_1` FOREIGN KEY (`faculty_id`) REFERENCES `faculties` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `department_section_targets`
--
ALTER TABLE `department_section_targets`
  ADD CONSTRAINT `fk_dept_targets_department` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_dept_targets_period` FOREIGN KEY (`period_id`) REFERENCES `periods` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `periods`
--
ALTER TABLE `periods`
  ADD CONSTRAINT `fk_periods_created_by` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE RESTRICT;

--
-- Constraints for table `submissions`
--
ALTER TABLE `submissions`
  ADD CONSTRAINT `fk_submissions_period` FOREIGN KEY (`period_id`) REFERENCES `periods` (`id`) ON DELETE SET NULL,
  ADD CONSTRAINT `fk_submissions_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `users`
--
ALTER TABLE `users`
  ADD CONSTRAINT `fk_users_department` FOREIGN KEY (`department_id`) REFERENCES `departments` (`id`) ON DELETE SET NULL,
  ADD CONSTRAINT `fk_users_faculty` FOREIGN KEY (`faculty_id`) REFERENCES `faculties` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `user_section_targets`
--
ALTER TABLE `user_section_targets`
  ADD CONSTRAINT `fk_user_targets_period` FOREIGN KEY (`period_id`) REFERENCES `periods` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `fk_user_targets_user` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
